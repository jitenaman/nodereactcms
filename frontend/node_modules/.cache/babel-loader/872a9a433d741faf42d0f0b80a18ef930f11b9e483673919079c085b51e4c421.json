{"ast":null,"code":"import{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{Link}from\"react-router-dom\";import API from\"../api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function CreatePost(){const[title,setTitle]=useState(\"\");const[content,setContent]=useState(\"\");const[image,setImage]=useState(null);const[preview,setPreview]=useState(null);// for image preview\nconst navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();try{const formData=new FormData();formData.append(\"title\",title);formData.append(\"content\",content);if(image)formData.append(\"image\",image);await API.post(\"/posts\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"}});navigate(\"/manage\");// redirect after creation\n}catch(err){var _err$response;console.error(\"Error creating post:\",((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data)||err.message);}};const handleImageChange=e=>{const file=e.target.files[0];setImage(file);if(file){const reader=new FileReader();reader.onloadend=()=>setPreview(reader.result);reader.readAsDataURL(file);}else{setPreview(null);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[\"Add Posts\",/*#__PURE__*/_jsx(Link,{to:\"/manage\",style:{marginLeft:\"auto\",padding:\"6px 12px\",background:\"#4CAF50\",color:\"#fff\",textDecoration:\"none\",borderRadius:\"4px\"},children:\"Back\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{maxWidth:\"500px\",margin:\"40px auto\",padding:\"20px\",border:\"1px solid #ccc\",borderRadius:\"8px\",background:\"#f9f9f9\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,onChange:e=>setTitle(e.target.value),placeholder:\"Title\",required:true,style:{width:\"100%\",padding:\"10px\",marginBottom:\"15px\",borderRadius:\"4px\",border:\"1px solid #ccc\"}}),/*#__PURE__*/_jsx(\"textarea\",{value:content,onChange:e=>setContent(e.target.value),placeholder:\"Content\",required:true,rows:5,style:{width:\"100%\",padding:\"10px\",marginBottom:\"15px\",borderRadius:\"4px\",border:\"1px solid #ccc\"}}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleImageChange,style:{marginBottom:\"15px\"}}),preview&&/*#__PURE__*/_jsx(\"img\",{src:preview,alt:\"Preview\",style:{width:\"100%\",marginBottom:\"15px\",borderRadius:\"4px\"}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{padding:\"8px 16px\"},children:\"Create Post\"})]})]});}","map":{"version":3,"names":["useState","useNavigate","Link","API","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CreatePost","title","setTitle","content","setContent","image","setImage","preview","setPreview","navigate","handleSubmit","e","preventDefault","formData","FormData","append","post","headers","err","_err$response","console","error","response","data","message","handleImageChange","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","children","style","display","justifyContent","alignItems","to","marginLeft","padding","background","color","textDecoration","borderRadius","onSubmit","maxWidth","margin","border","type","value","onChange","placeholder","required","width","marginBottom","rows","src","alt"],"sources":["C:/xampp/htdocs/cms-project/frontend/src/pages/CreatePost.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport API from \"../api\";\n\nexport default function CreatePost() {\n  const [title, setTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const [preview, setPreview] = useState(null); // for image preview\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const formData = new FormData();\n      formData.append(\"title\", title);\n      formData.append(\"content\", content);\n      if (image) formData.append(\"image\", image);\n\n      await API.post(\"/posts\", formData, {\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      });\n\n      navigate(\"/manage\"); // redirect after creation\n    } catch (err) {\n      console.error(\"Error creating post:\", err.response?.data || err.message);\n    }\n  };\n\n  const handleImageChange = (e) => {\n    const file = e.target.files[0];\n    setImage(file);\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => setPreview(reader.result);\n      reader.readAsDataURL(file);\n    } else {\n      setPreview(null);\n    }\n  };\n\n  return (\n    <>\n    <h2 style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n      Add Posts\n      <Link to=\"/manage\" style={{ marginLeft: \"auto\", padding: \"6px 12px\", background: \"#4CAF50\", color: \"#fff\", textDecoration: \"none\", borderRadius: \"4px\" }}>\n        Back\n      </Link>\n    </h2>\n    <form\n      onSubmit={handleSubmit}\n      style={{\n        maxWidth: \"500px\",\n        margin: \"40px auto\",\n        padding: \"20px\",\n        border: \"1px solid #ccc\",\n        borderRadius: \"8px\",\n        background: \"#f9f9f9\",\n      }}\n    >\n      \n\n      <input\n        type=\"text\"\n        value={title}\n        onChange={(e) => setTitle(e.target.value)}\n        placeholder=\"Title\"\n        required\n        style={{ width: \"100%\", padding: \"10px\", marginBottom: \"15px\", borderRadius: \"4px\", border: \"1px solid #ccc\" }}\n      />\n\n      <textarea\n        value={content}\n        onChange={(e) => setContent(e.target.value)}\n        placeholder=\"Content\"\n        required\n        rows={5}\n        style={{ width: \"100%\", padding: \"10px\", marginBottom: \"15px\", borderRadius: \"4px\", border: \"1px solid #ccc\" }}\n      />\n\n      <input\n        type=\"file\"\n        onChange={handleImageChange}\n        style={{ marginBottom: \"15px\" }}\n      />\n\n      {preview && (\n        <img\n          src={preview}\n          alt=\"Preview\"\n          style={{ width: \"100%\", marginBottom: \"15px\", borderRadius: \"4px\" }}\n        />\n      )}\n\n      <button\n        type=\"submit\"\n         style={{ padding: \"8px 16px\" }}\n      >\n        Create Post\n      </button>\n    </form>\n   </> \n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}