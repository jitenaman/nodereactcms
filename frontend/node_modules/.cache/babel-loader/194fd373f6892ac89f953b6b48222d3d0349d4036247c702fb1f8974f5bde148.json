{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\cms-project\\\\frontend\\\\src\\\\pages\\\\EditPost.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport API from \"../api\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function EditPost() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [title, setTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [image, setImage] = useState(null); // new file\n  const [preview, setPreview] = useState(\"\"); // URL for preview\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchPost = async () => {\n      try {\n        const res = await API.get(`/posts/${id}`);\n        setTitle(res.data.title || \"\");\n        setContent(res.data.content || \"\");\n\n        // set preview to existing image if available\n        if (res.data.image) {\n          setPreview(`http://localhost:5000/uploads/${res.data.image}`);\n        }\n        setLoading(false);\n      } catch (err) {\n        var _err$response;\n        console.error(\"Failed to fetch post:\", ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message);\n        setLoading(false);\n      }\n    };\n    fetchPost();\n  }, [id]);\n\n  // Handle image file selection\n  const handleImageChange = e => {\n    const file = e.target.files[0];\n    setImage(file);\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => setPreview(reader.result);\n      reader.readAsDataURL(file); // show preview\n    }\n  };\n  const handleUpdate = async e => {\n    e.preventDefault();\n    try {\n      const formData = new FormData();\n      formData.append(\"title\", title);\n      formData.append(\"content\", content);\n      if (image) formData.append(\"image\", image);\n      await API.put(`/posts/${id}`, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      navigate(\"/manage\"); // redirect after update\n    } catch (err) {\n      var _err$response2;\n      console.error(\"Update failed:\", ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data) || err.message);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading post...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\"\n      },\n      children: [\"Edit Posts\", /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/manage\",\n        style: {\n          marginLeft: \"auto\",\n          padding: \"6px 12px\",\n          background: \"#4CAF50\",\n          color: \"#fff\",\n          textDecoration: \"none\",\n          borderRadius: \"4px\"\n        },\n        children: \"Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleUpdate,\n      style: {\n        maxWidth: \"500px\",\n        margin: \"40px auto\",\n        padding: \"20px\",\n        border: \"1px solid #ccc\",\n        borderRadius: \"8px\",\n        background: \"#f9f9f9\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: title,\n        onChange: e => setTitle(e.target.value),\n        placeholder: \"Title\",\n        required: true,\n        style: {\n          width: \"100%\",\n          marginBottom: \"10px\",\n          padding: \"8px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: content,\n        onChange: e => setContent(e.target.value),\n        placeholder: \"Content\",\n        required: true,\n        rows: 5,\n        style: {\n          width: \"100%\",\n          marginBottom: \"10px\",\n          padding: \"8px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 7\n      }, this), preview && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: \"10px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: preview,\n          alt: \"Preview\",\n          style: {\n            width: \"150px\",\n            height: \"auto\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: handleImageChange,\n        style: {\n          marginBottom: \"10px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        style: {\n          padding: \"8px 16px\"\n        },\n        children: \"Update Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n_s(EditPost, \"QsTZr13d+35e2DReOqhqugX6YcU=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = EditPost;\nvar _c;\n$RefreshReg$(_c, \"EditPost\");","map":{"version":3,"names":["useEffect","useState","useParams","useNavigate","Link","API","jsxDEV","_jsxDEV","Fragment","_Fragment","EditPost","_s","id","navigate","title","setTitle","content","setContent","image","setImage","preview","setPreview","loading","setLoading","fetchPost","res","get","data","err","_err$response","console","error","response","message","handleImageChange","e","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","handleUpdate","preventDefault","formData","FormData","append","put","headers","_err$response2","children","fileName","_jsxFileName","lineNumber","columnNumber","style","display","justifyContent","alignItems","to","marginLeft","padding","background","color","textDecoration","borderRadius","onSubmit","maxWidth","margin","border","type","value","onChange","placeholder","required","width","marginBottom","rows","src","alt","height","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/cms-project/frontend/src/pages/EditPost.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport API from \"../api\";\n\nexport default function EditPost() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n\n  const [title, setTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [image, setImage] = useState(null); // new file\n  const [preview, setPreview] = useState(\"\"); // URL for preview\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchPost = async () => {\n      try {\n        const res = await API.get(`/posts/${id}`);\n        setTitle(res.data.title || \"\");\n        setContent(res.data.content || \"\");\n\n        // set preview to existing image if available\n        if (res.data.image) {\n          setPreview(`http://localhost:5000/uploads/${res.data.image}`);\n        }\n\n        setLoading(false);\n      } catch (err) {\n        console.error(\"Failed to fetch post:\", err.response?.data || err.message);\n        setLoading(false);\n      }\n    };\n    fetchPost();\n  }, [id]);\n\n  // Handle image file selection\n  const handleImageChange = (e) => {\n    const file = e.target.files[0];\n    setImage(file);\n\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => setPreview(reader.result);\n      reader.readAsDataURL(file); // show preview\n    }\n  };\n\n  const handleUpdate = async (e) => {\n    e.preventDefault();\n    try {\n      const formData = new FormData();\n      formData.append(\"title\", title);\n      formData.append(\"content\", content);\n      if (image) formData.append(\"image\", image);\n\n      await API.put(`/posts/${id}`, formData, {\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      });\n\n      navigate(\"/manage\"); // redirect after update\n    } catch (err) {\n      console.error(\"Update failed:\", err.response?.data || err.message);\n    }\n  };\n\n  if (loading) return <p>Loading post...</p>;\n\n  return (\n    <>\n    <h2 style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n      Edit Posts\n      <Link to=\"/manage\" style={{ marginLeft: \"auto\", padding: \"6px 12px\", background: \"#4CAF50\", color: \"#fff\", textDecoration: \"none\", borderRadius: \"4px\" }}>\n        Back\n      </Link>\n    </h2>\n    <form onSubmit={handleUpdate} style={{\n        maxWidth: \"500px\",\n        margin: \"40px auto\",\n        padding: \"20px\",\n        border: \"1px solid #ccc\",\n        borderRadius: \"8px\",\n        background: \"#f9f9f9\",\n      }}>\n       \n\n      <input\n        type=\"text\"\n        value={title}\n        onChange={(e) => setTitle(e.target.value)}\n        placeholder=\"Title\"\n        required\n        style={{ width: \"100%\", marginBottom: \"10px\", padding: \"8px\" }}\n      />\n\n      <textarea\n        value={content}\n        onChange={(e) => setContent(e.target.value)}\n        placeholder=\"Content\"\n        required\n        rows={5}\n        style={{ width: \"100%\", marginBottom: \"10px\", padding: \"8px\" }}\n      ></textarea>\n\n      {/* Image preview */}\n      {preview && (\n        <div style={{ marginBottom: \"10px\" }}>\n          <img src={preview} alt=\"Preview\" style={{ width: \"150px\", height: \"auto\" }} />\n        </div>\n      )}\n\n      <input\n        type=\"file\"\n        onChange={handleImageChange}\n        style={{ marginBottom: \"10px\" }}\n      />\n\n      <button type=\"submit\" style={{ padding: \"8px 16px\" }}>\n        Update Post\n      </button>\n    </form>\n   </> \n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}